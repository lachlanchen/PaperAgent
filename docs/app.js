const translations = {
  en: {
    nav_ecosystem: 'Ecosystem',
    ecosystem_title: 'LazyingArt ecosystem',
    ecosystem_subtitle: 'Connected tools and communities that power PaperAgent and OnlyIdeas.',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: 'Multilingual AI companion for learning and creation.',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'The studio behind OnlyIdeas, EchoMind, and LazyEdit.',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: 'Research-to-product community for bold concepts.',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: 'Focus on ideas while PaperAgent handles the paper workflow.',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: 'Automations that turn small wins into income.',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: 'LazyLearn tracks for physics and chemistry (coming soon).',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: 'IdeasRobot for drafting, tasks, and posts (coming soon).',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — capture, translate, and publish highlights.',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: 'LazyingArt Coin for rewards and payouts.',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'Notebook of research notes and essays.',
  },
  'zh-Hans': {
    nav_ecosystem: '生态',
    ecosystem_title: 'LazyingArt 生态系统',
    ecosystem_subtitle: '连接 PaperAgent 与 OnlyIdeas 的产品与社区。',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: '多语言 AI 伙伴，陪你学习和创作。',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'OnlyIdeas、EchoMind 和 LazyEdit 背后的工作室。',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: '面向大胆创意的“从研究到产品”社区。',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: '专注想法，论文流程交给 PaperAgent。',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: '自动化工具，把小成果逐步变成收入。',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: '物理与化学课程和笔记本。',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: '帮你把想法转成草稿、任务和帖子。',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: '采集、翻译，并自动生成高光视频与片段。',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: '用于奖励与结算的 LazyingArt Coin。',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: '为 OnlyIdeas 提供输入的研究笔记和文章。',
  },
  'zh-Hant': {
    nav_ecosystem: '生態系',
    ecosystem_title: 'LazyingArt 生態系',
    ecosystem_subtitle: '串連 PaperAgent 與 OnlyIdeas 的產品與社群。',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: '多語言 AI 夥伴，陪你學習與創作。',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'OnlyIdeas、EchoMind 與 LazyEdit 背後的工作室。',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: '面向大膽創意的「從研究到產品」社群。',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: '專注想法，論文流程交給 PaperAgent。',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: '自動化工具，將小成果逐步變成收入。',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: '物理與化學課程與筆記本。',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: '幫你把想法轉成草稿、任務與貼文。',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: '採集、翻譯，並自動生成高光影片與片段。',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: '用於獎勵與結算的 LazyingArt Coin。',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: '為 OnlyIdeas 提供輸入的研究筆記與文章。',
  },
  ja: {
    nav_ecosystem: 'エコシステム',
    ecosystem_title: 'LazyingArt エコシステム',
    ecosystem_subtitle: 'PaperAgent と OnlyIdeas を支える製品とコミュニティ。',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: '多言語AIパートナー。学習と創作を支援。',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'OnlyIdeas・EchoMind・LazyEdit を手がけるスタジオです。',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: '大胆なアイデアの研究からプロダクトへのコミュニティ。',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: 'アイデアに集中。論文フローはPaperAgentが担当。',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: '小さな成果を収益化する自動化。',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: '物理・化学のLazyLearn（近日公開）。',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: 'アイデアを下書き・タスク・投稿に変換。',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — 収録・翻訳・ハイライト生成。',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: '報酬と決済のためのLazyingArt Coin。',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'OnlyIdeas向けの研究ノートとエッセイ。',
  },
  ko: {
    nav_ecosystem: '에코시스템',
    ecosystem_title: 'LazyingArt 에코시스템',
    ecosystem_subtitle: 'PaperAgent와 OnlyIdeas를 잇는 제품과 커뮤니티.',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: '학습과 창작을 위한 다국어 AI 파트너.',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'OnlyIdeas, EchoMind, LazyEdit의 배후 스튜디오입니다.',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: '대담한 아이디어를 위한 연구-제품 커뮤니티.',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: '아이디어에 집중, 논문 흐름은 PaperAgent가 처리.',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: '작은 성과를 수익으로 바꾸는 자동화.',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: '물리·화학 LazyLearn 트랙(준비 중).',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: '아이디어를 초안·작업·게시물로 변환.',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — 수집·번역·하이라이트 생성.',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: '보상과 정산을 위한 LazyingArt Coin.',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'OnlyIdeas를 위한 연구 노트와 에세이.',
  },
  vi: {
    nav_ecosystem: 'Hệ sinh thái',
    ecosystem_title: 'Hệ sinh thái LazyingArt',
    ecosystem_subtitle: 'Kết nối sản phẩm và cộng đồng cho PaperAgent và OnlyIdeas.',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: 'Bạn đồng hành AI đa ngôn ngữ cho học tập và sáng tạo.',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'Studio đứng sau OnlyIdeas, EchoMind và LazyEdit.',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: 'Cộng đồng từ nghiên cứu đến sản phẩm cho ý tưởng táo bạo.',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: 'Tập trung vào ý tưởng, PaperAgent xử lý luồng bài viết.',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: 'Tự động hóa biến thành quả nhỏ thành thu nhập.',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: 'Lộ trình LazyLearn Vật lý & Hóa học (sắp ra mắt).',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: 'Biến ý tưởng thành bản nháp, nhiệm vụ, bài đăng.',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — ghi lại, dịch, tạo highlight.',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: 'LazyingArt Coin cho thưởng và thanh toán.',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'Sổ tay ghi chú và bài viết cho OnlyIdeas.',
  },
  ar: {
    nav_ecosystem: 'المنظومة',
    ecosystem_title: 'منظومة LazyingArt',
    ecosystem_subtitle: 'أدوات ومجتمعات تدعم PaperAgent وOnlyIdeas.',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: 'رفيق ذكاء اصطناعي متعدد اللغات للتعلّم والإبداع.',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'الاستوديو الذي يقف وراء OnlyIdeas و EchoMind و LazyEdit.',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: 'مجتمع من البحث إلى المنتج للأفكار الجريئة.',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: 'ركّز على الفكرة ودع PaperAgent يدير سير الورقة.',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: 'أتمتة تحوّل الإنجازات الصغيرة إلى دخل.',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: 'مسارات LazyLearn للفيزياء والكيمياء (قريبًا).',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: 'حوّل الأفكار إلى مسودات ومهام ومنشورات.',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — التقط، ترجم، وولّد أبرز المقاطع.',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: 'LazyingArt Coin للمكافآت والتسويات.',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'دفتر ملاحظات وبحوث لـ OnlyIdeas.',
  },
  fr: {
    nav_ecosystem: 'Écosystème',
    ecosystem_title: 'Écosystème LazyingArt',
    ecosystem_subtitle: 'Outils et communautés qui alimentent PaperAgent et OnlyIdeas.',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: 'Compagnon IA multilingue pour apprendre et créer.',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'Le studio derrière OnlyIdeas, EchoMind et LazyEdit.',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: 'Communauté recherche‑vers‑produit pour des idées audacieuses.',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: 'Concentrez-vous sur l’idée, PaperAgent gère le flux de papier.',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: 'Automatisations pour transformer de petits succès en revenus.',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: 'Parcours LazyLearn pour physique et chimie (bientôt).',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: 'Transforme les idées en brouillons, tâches et posts.',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — capter, traduire et publier des temps forts.',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: 'LazyingArt Coin pour récompenses et paiements.',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'Carnet de notes et essais pour OnlyIdeas.',
  },
  es: {
    nav_ecosystem: 'Ecosistema',
    ecosystem_title: 'Ecosistema LazyingArt',
    ecosystem_subtitle: 'Herramientas y comunidades que impulsan PaperAgent y OnlyIdeas.',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: 'Compañero de IA multilingüe para aprender y crear.',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'El estudio detrás de OnlyIdeas, EchoMind y LazyEdit.',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: 'Comunidad de investigación a producto para ideas audaces.',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: 'Enfócate en la idea; PaperAgent gestiona el flujo del paper.',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: 'Automatizaciones para convertir pequeños logros en ingresos.',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: 'Rutas LazyLearn de física y química (próximamente).',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: 'Convierte ideas en borradores, tareas y publicaciones.',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — captura, traduce y publica destacados.',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: 'LazyingArt Coin para recompensas y pagos.',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'Cuaderno de notas y ensayos para OnlyIdeas.',
  },
};

const normalizeLang = (value) => {
  if (!value) return 'en';
  const lang = value.toLowerCase();
  if (lang.startsWith('zh')) {
    if (lang.includes('hant') || lang.includes('tw') || lang.includes('hk')) {
      return 'zh-Hant';
    }
    return 'zh-Hans';
  }
  if (lang.startsWith('ja')) return 'ja';
  if (lang.startsWith('ko')) return 'ko';
  if (lang.startsWith('vi')) return 'vi';
  if (lang.startsWith('ar')) return 'ar';
  if (lang.startsWith('fr')) return 'fr';
  if (lang.startsWith('es')) return 'es';
  return 'en';
};

const resolveLang = () => {
  const params = new URLSearchParams(window.location.search);
  const override = params.get('lang');
  const normalizedOverride = normalizeLang(override);
  if (override && translations[normalizedOverride]) {
    return normalizedOverride;
  }
  const browserLang = normalizeLang(navigator.language);
  return translations[browserLang] ? browserLang : 'en';
};

const applyTranslations = () => {
  const lang = resolveLang();
  document.documentElement.lang = lang;
  document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
  const dict = translations[lang] || translations.en;
  document.querySelectorAll('[data-i18n]').forEach((el) => {
    const key = el.getAttribute('data-i18n');
    if (dict[key]) {
      el.textContent = dict[key];
    }
  });
};

applyTranslations();

const revealItems = document.querySelectorAll('.reveal');

const revealObserver = new IntersectionObserver(
  (entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        revealObserver.unobserve(entry.target);
      }
    });
  },
  { threshold: 0.2 }
);

revealItems.forEach((item) => revealObserver.observe(item));
