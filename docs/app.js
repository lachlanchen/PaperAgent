const translations = {
  en: {
    page_title: 'PaperAgent Terminal',
    page_description:
      'PaperAgent Terminal is a local-first workspace for writing papers with code, LaTeX, and live PDF preview.',
    brand_subtitle: 'Local-first research workspace',
    nav_features: 'Features',
    nav_workflow: 'Workflow',
    nav_demo: 'Demo',
    nav_ecosystem: 'Ecosystem',
    nav_github: 'GitHub',
    lang_label: 'Language',
    lang_select_label: 'Select language',
    hero_title: 'Overleaf meets Codex. Ideas to paper with zero friction.',
    hero_lead:
      'PaperAgent Terminal is a local-first workspace where you can edit LaTeX and code in the browser, execute Python/R on the backend, and preview PDFs with logs in one place.',
    hero_cta_demo: 'View the demo',
    hero_cta_code: 'Get the code',
    metric_local_title: 'Local-first',
    metric_local_desc: 'Data stays on your machine',
    metric_workspace_title: 'Single workspace',
    metric_workspace_desc: 'Code + LaTeX + PDF',
    metric_exec_title: 'Live execution',
    metric_exec_desc: 'Terminal + Codex Bridge',
    hero_pill: 'PaperAgent Terminal',
    hero_card_title: 'Write. Execute. Preview. Iterate.',
    hero_card_body:
      'Build a paper workspace in seconds, compile LaTeX with one click, run experiments, and stay in the flow.',
    hero_card_footer_left: 'Docker-backed · Optional',
    hero_card_footer_right: 'Codex Bridge · Live',
    features_title: 'Everything a paper needs',
    features_subtitle: 'Purpose-built for research workflows, with power tools that stay out of the way.',
    feature_controls_title: 'Project controls',
    feature_controls_desc:
      'Spin up a paper workspace, initialize LaTeX, compile PDFs, and manage Git/SSH without leaving the page.',
    feature_terminal_title: 'Live terminal',
    feature_terminal_desc: 'Web terminal connected to your execution environment, so every command stays reproducible.',
    feature_pdf_title: 'PDF preview',
    feature_pdf_desc: 'Render PDFs next to your terminal and editor. Review logs and fix issues instantly.',
    feature_codex_title: 'Codex Bridge',
    feature_codex_desc: 'Chat to Codex in the same workspace, resume sessions, and automate repetitive tasks.',
    feature_editor_title: 'Editor + file tree',
    feature_editor_desc: 'Navigate project files, edit LaTeX and code with syntax highlighting, and save to the container.',
    feature_privacy_title: 'Local-first privacy',
    feature_privacy_desc: 'Your data stays on your machine. Use Docker only when you want isolation.',
    workflow_title: 'The idea-to-paper loop',
    workflow_subtitle: 'Designed for fast iteration so ideas stay in motion.',
    workflow_step1_title: 'Plan + scaffold',
    workflow_step1_desc: 'Create a workspace with LaTeX, code, figures, and artifacts in one command.',
    workflow_step2_title: 'Execute + compile',
    workflow_step2_desc: 'Run Python/R, compile LaTeX, and capture logs without breaking the flow.',
    workflow_step3_title: 'Review + refine',
    workflow_step3_desc: 'Preview the PDF, edit the source, and push changes with clean, repeatable steps.',
    demo_title: 'Product demo',
    demo_subtitle: 'A single workspace for terminal, controls, editor, and live PDF preview.',
    demo_image_alt: 'PaperAgent Terminal demo',
    ecosystem_title: 'LazyingArt ecosystem',
    ecosystem_subtitle: 'Connected tools and communities that power PaperAgent and OnlyIdeas.',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'The studio behind OnlyIdeas, EchoMind, and LazyEdit.',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: 'Research-to-product community for bold concepts.',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: 'Multilingual AI companion for learning and creation.',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: 'Focus on ideas while PaperAgent handles the paper workflow.',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: 'LazyingArt Coin for rewards and payouts.',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: 'Automations that turn small wins into income.',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: 'LazyLearn tracks for physics and chemistry (coming soon).',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: 'IdeasRobot for drafting, tasks, and posts (coming soon).',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — capture, translate, and publish highlights.',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'Notebook of research notes and essays.',
    footer_line1: 'PaperAgent Terminal · paper.lazying.art',
    footer_line2: 'Local-first research workspace',
  },
  'zh-Hans': {
    page_title: 'PaperAgent Terminal',
    page_description: 'PaperAgent Terminal 是本地优先论文工作台，可在浏览器编辑 LaTeX 与代码，后端执行 Python/R，并预览 PDF 与日志。',
    brand_subtitle: '本地优先研究工作台',
    nav_features: '功能',
    nav_workflow: '流程',
    nav_demo: '演示',
    nav_ecosystem: '生态',
    nav_github: 'GitHub',
    lang_label: '语言',
    lang_select_label: '选择语言',
    hero_title: 'Overleaf × Codex，想法直达论文。',
    hero_lead: 'PaperAgent Terminal 是本地优先工作台，可在浏览器编辑 LaTeX 与代码，后端执行 Python/R，并在同处预览 PDF 与日志。',
    hero_cta_demo: '查看演示',
    hero_cta_code: '获取代码',
    metric_local_title: '本地优先',
    metric_local_desc: '数据留在你的机器',
    metric_workspace_title: '统一工作台',
    metric_workspace_desc: '代码 + LaTeX + PDF',
    metric_exec_title: '实时执行',
    metric_exec_desc: '终端 + Codex Bridge',
    hero_pill: 'PaperAgent Terminal',
    hero_card_title: '写作、执行、预览、迭代。',
    hero_card_body: '几秒搭建论文工作区，一键编译 LaTeX，运行实验，保持心流。',
    hero_card_footer_left: 'Docker 支持 · 可选',
    hero_card_footer_right: 'Codex Bridge · 实时',
    features_title: '论文所需一切',
    features_subtitle: '为研究流程量身打造，强大却不打扰。',
    feature_controls_title: '项目控制',
    feature_controls_desc: '创建工作区、初始化 LaTeX、一键编译、管理 Git/SSH。',
    feature_terminal_title: '实时终端',
    feature_terminal_desc: 'Web 终端直连执行环境，命令可复现。',
    feature_pdf_title: 'PDF 预览',
    feature_pdf_desc: '终端与编辑器旁边直接预览 PDF 与日志。',
    feature_codex_title: 'Codex Bridge',
    feature_codex_desc: '同一工作区聊天、恢复会话、自动化重复任务。',
    feature_editor_title: '编辑器 + 文件树',
    feature_editor_desc: '浏览项目文件，语法高亮编辑，直接保存到容器。',
    feature_privacy_title: '本地优先隐私',
    feature_privacy_desc: '数据留在本机，隔离时才用 Docker。',
    workflow_title: '想法到论文闭环',
    workflow_subtitle: '快速迭代，让思路保持流动。',
    workflow_step1_title: '规划 + 脚手架',
    workflow_step1_desc: '一条命令创建 LaTeX、代码、图表与产物。',
    workflow_step2_title: '执行 + 编译',
    workflow_step2_desc: '运行 Python/R，编译 LaTeX，捕获日志不打断。',
    workflow_step3_title: '审阅 + 迭代',
    workflow_step3_desc: '预览 PDF，修改源文件，干净可重复地提交。',
    demo_title: '产品演示',
    demo_subtitle: '终端、控制、编辑器与 PDF 预览同屏呈现。',
    demo_image_alt: 'PaperAgent Terminal 演示',
    ecosystem_title: 'LazyingArt 生态系统',
    ecosystem_subtitle: '连接 PaperAgent 与 OnlyIdeas 的产品与社区。',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'OnlyIdeas、EchoMind 和 LazyEdit 背后的工作室。',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: '面向大胆创意的“从研究到产品”社区。',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: '多语言 AI 伙伴，陪你学习和创作。',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: '专注想法，论文流程交给 PaperAgent。',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: '用于奖励与结算的 LazyingArt Coin。',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: '自动化工具，把小成果逐步变成收入。',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: '物理与化学课程和笔记本。',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: '帮你把想法转成草稿、任务和帖子。',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: '采集、翻译，并自动生成高光视频与片段。',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: '为 OnlyIdeas 提供输入的研究笔记和文章。',
    footer_line1: 'PaperAgent Terminal · paper.lazying.art',
    footer_line2: '本地优先研究工作台',
  },
  'zh-Hant': {
    page_title: 'PaperAgent Terminal',
    page_description: 'PaperAgent Terminal 是本地優先論文工作台，可在瀏覽器編輯 LaTeX 與程式碼，後端執行 Python/R，並預覽 PDF 與日誌。',
    brand_subtitle: '本地優先研究工作台',
    nav_features: '功能',
    nav_workflow: '流程',
    nav_demo: '示範',
    nav_ecosystem: '生態系',
    nav_github: 'GitHub',
    lang_label: '語言',
    lang_select_label: '選擇語言',
    hero_title: 'Overleaf × Codex，想法直達論文。',
    hero_lead: 'PaperAgent Terminal 是本地優先工作台，可在瀏覽器編輯 LaTeX 與程式碼，後端執行 Python/R，並在同處預覽 PDF 與日誌。',
    hero_cta_demo: '查看示範',
    hero_cta_code: '取得程式碼',
    metric_local_title: '本地優先',
    metric_local_desc: '資料留在你的機器',
    metric_workspace_title: '單一工作台',
    metric_workspace_desc: '程式碼 + LaTeX + PDF',
    metric_exec_title: '即時執行',
    metric_exec_desc: '終端 + Codex Bridge',
    hero_pill: 'PaperAgent Terminal',
    hero_card_title: '寫作、執行、預覽、迭代。',
    hero_card_body: '幾秒搭建論文工作區，一鍵編譯 LaTeX，執行實驗，保持心流。',
    hero_card_footer_left: 'Docker 支援 · 可選',
    hero_card_footer_right: 'Codex Bridge · 即時',
    features_title: '論文所需一切',
    features_subtitle: '為研究流程量身打造，強大卻不打擾。',
    feature_controls_title: '專案控制',
    feature_controls_desc: '建立工作區、初始化 LaTeX、一鍵編譯、管理 Git/SSH。',
    feature_terminal_title: '即時終端',
    feature_terminal_desc: 'Web 終端直連執行環境，命令可重現。',
    feature_pdf_title: 'PDF 預覽',
    feature_pdf_desc: '終端與編輯器旁直接預覽 PDF 與日誌。',
    feature_codex_title: 'Codex Bridge',
    feature_codex_desc: '同一工作區聊天、恢復會話、自動化重複任務。',
    feature_editor_title: '編輯器 + 檔案樹',
    feature_editor_desc: '瀏覽專案檔案、語法高亮編輯、直接保存到容器。',
    feature_privacy_title: '本地優先隱私',
    feature_privacy_desc: '資料留在本機，需要隔離才用 Docker。',
    workflow_title: '想法到論文閉環',
    workflow_subtitle: '快速迭代，讓思路保持流動。',
    workflow_step1_title: '規劃 + 腳手架',
    workflow_step1_desc: '一條命令建立 LaTeX、程式碼、圖表與產物。',
    workflow_step2_title: '執行 + 編譯',
    workflow_step2_desc: '執行 Python/R，編譯 LaTeX，捕捉日誌不打斷。',
    workflow_step3_title: '審閱 + 迭代',
    workflow_step3_desc: '預覽 PDF，修改來源檔，乾淨可重複地提交。',
    demo_title: '產品示範',
    demo_subtitle: '終端、控制、編輯器與 PDF 預覽同屏呈現。',
    demo_image_alt: 'PaperAgent Terminal 示範',
    ecosystem_title: 'LazyingArt 生態系',
    ecosystem_subtitle: '串連 PaperAgent 與 OnlyIdeas 的產品與社群。',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'OnlyIdeas、EchoMind 與 LazyEdit 背後的工作室。',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: '面向大膽創意的「從研究到產品」社群。',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: '多語言 AI 夥伴，陪你學習與創作。',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: '專注想法，論文流程交給 PaperAgent。',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: '用於獎勵與結算的 LazyingArt Coin。',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: '自動化工具，將小成果逐步變成收入。',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: '物理與化學課程與筆記本。',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: '幫你把想法轉成草稿、任務與貼文。',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: '採集、翻譯，並自動生成高光影片與片段。',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: '為 OnlyIdeas 提供輸入的研究筆記與文章。',
    footer_line1: 'PaperAgent Terminal · paper.lazying.art',
    footer_line2: '本地優先研究工作台',
  },
  ja: {
    page_title: 'PaperAgent Terminal',
    page_description: 'PaperAgent Terminal はローカルファーストの論文ワークスペース。ブラウザで LaTeX とコードを編集し、Python/R を実行し、PDF とログを一箇所で確認できます。',
    brand_subtitle: 'ローカルファーストの研究ワークスペース',
    nav_features: '機能',
    nav_workflow: 'ワークフロー',
    nav_demo: 'デモ',
    nav_ecosystem: 'エコシステム',
    nav_github: 'GitHub',
    lang_label: '言語',
    lang_select_label: '言語を選択',
    hero_title: 'Overleaf × Codex。アイデアを論文へ、摩擦ゼロ。',
    hero_lead:
      'PaperAgent Terminal はローカルファーストなワークスペース。ブラウザで LaTeX とコードを編集し、バックエンドで Python/R を実行、PDF とログを同じ場所で確認できます。',
    hero_cta_demo: 'デモを見る',
    hero_cta_code: 'コードを見る',
    metric_local_title: 'ローカルファースト',
    metric_local_desc: 'データは手元に',
    metric_workspace_title: 'ひとつの作業空間',
    metric_workspace_desc: 'コード + LaTeX + PDF',
    metric_exec_title: 'リアルタイム実行',
    metric_exec_desc: 'ターミナル + Codex Bridge',
    hero_pill: 'PaperAgent Terminal',
    hero_card_title: '書く。実行。プレビュー。反復。',
    hero_card_body: '数秒で論文ワークスペースを構築し、LaTeX をワンクリックでコンパイル、実験を実行。',
    hero_card_footer_left: 'Docker 対応 · 任意',
    hero_card_footer_right: 'Codex Bridge · ライブ',
    features_title: '論文に必要なすべて',
    features_subtitle: '研究フローに最適化、強力でも邪魔しない。',
    feature_controls_title: 'プロジェクト制御',
    feature_controls_desc: 'ワークスペース作成、LaTeX 初期化、ワンクリックコンパイル、Git/SSH 管理。',
    feature_terminal_title: 'ライブターミナル',
    feature_terminal_desc: '実行環境に接続された Web ターミナルで再現性を確保。',
    feature_pdf_title: 'PDF プレビュー',
    feature_pdf_desc: 'ターミナルとエディタの隣で PDF とログを確認。',
    feature_codex_title: 'Codex Bridge',
    feature_codex_desc: '同じワークスペースでチャット、セッション復元、反復作業を自動化。',
    feature_editor_title: 'エディタ + ファイルツリー',
    feature_editor_desc: 'プロジェクトのファイルを閲覧し、シンタックスハイライトで編集、コンテナに保存。',
    feature_privacy_title: 'ローカルファーストのプライバシー',
    feature_privacy_desc: 'データはローカルに。隔離したい時だけ Docker。',
    workflow_title: 'アイデアから論文へのループ',
    workflow_subtitle: '迅速な反復で思考を止めない。',
    workflow_step1_title: '計画 + 足場',
    workflow_step1_desc: '1 コマンドで LaTeX、コード、図、成果物を作成。',
    workflow_step2_title: '実行 + コンパイル',
    workflow_step2_desc: 'Python/R を実行し、LaTeX をコンパイル、ログを取得。',
    workflow_step3_title: 'レビュー + 改善',
    workflow_step3_desc: 'PDF を確認し、ソースを編集してきれいに反復。',
    demo_title: 'プロダクトデモ',
    demo_subtitle: 'ターミナル、コントロール、エディタ、PDF を一画面で。',
    demo_image_alt: 'PaperAgent Terminal デモ',
    ecosystem_title: 'LazyingArt エコシステム',
    ecosystem_subtitle: 'PaperAgent と OnlyIdeas を支える製品とコミュニティ。',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'OnlyIdeas・EchoMind・LazyEdit を手がけるスタジオです。',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: '大胆なアイデアの研究からプロダクトへのコミュニティ。',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: '多言語AIパートナー。学習と創作を支援。',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: 'アイデアに集中。論文フローはPaperAgentが担当。',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: '報酬と決済のためのLazyingArt Coin。',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: '小さな成果を収益化する自動化。',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: '物理・化学のLazyLearn（近日公開）。',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: 'アイデアを下書き・タスク・投稿に変換。',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — 収録・翻訳・ハイライト生成。',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'OnlyIdeas向けの研究ノートとエッセイ。',
    footer_line1: 'PaperAgent Terminal · paper.lazying.art',
    footer_line2: 'ローカルファースト研究ワークスペース',
  },
  ko: {
    page_title: 'PaperAgent Terminal',
    page_description: 'PaperAgent Terminal은 로컬 우선 논문 워크스페이스로, 브라우저에서 LaTeX와 코드를 편집하고 Python/R을 실행하며 PDF와 로그를 한곳에서 확인합니다.',
    brand_subtitle: '로컬 우선 연구 워크스페이스',
    nav_features: '기능',
    nav_workflow: '워크플로',
    nav_demo: '데모',
    nav_ecosystem: '에코시스템',
    nav_github: 'GitHub',
    lang_label: '언어',
    lang_select_label: '언어 선택',
    hero_title: 'Overleaf × Codex. 아이디어를 논문으로, 마찰 없이.',
    hero_lead: 'PaperAgent Terminal은 로컬 우선 워크스페이스로, 브라우저에서 LaTeX와 코드를 편집하고 백엔드에서 Python/R을 실행하며 PDF와 로그를 한곳에서 확인합니다.',
    hero_cta_demo: '데모 보기',
    hero_cta_code: '코드 보기',
    metric_local_title: '로컬 우선',
    metric_local_desc: '데이터는 내 컴퓨터에',
    metric_workspace_title: '하나의 워크스페이스',
    metric_workspace_desc: '코드 + LaTeX + PDF',
    metric_exec_title: '실시간 실행',
    metric_exec_desc: '터미널 + Codex Bridge',
    hero_pill: 'PaperAgent Terminal',
    hero_card_title: '쓰기. 실행. 미리보기. 반복.',
    hero_card_body: '몇 초 만에 논문 워크스페이스를 만들고 LaTeX를 원클릭 컴파일, 실험을 실행하세요.',
    hero_card_footer_left: 'Docker 지원 · 선택',
    hero_card_footer_right: 'Codex Bridge · 라이브',
    features_title: '논문에 필요한 모든 것',
    features_subtitle: '연구 워크플로를 위해 설계된 강력한 도구.',
    feature_controls_title: '프로젝트 컨트롤',
    feature_controls_desc: '워크스페이스 생성, LaTeX 초기화, 원클릭 컴파일, Git/SSH 관리.',
    feature_terminal_title: '라이브 터미널',
    feature_terminal_desc: '실행 환경에 연결된 웹 터미널로 재현성 확보.',
    feature_pdf_title: 'PDF 미리보기',
    feature_pdf_desc: '터미널과 편집기 옆에서 PDF와 로그 확인.',
    feature_codex_title: 'Codex Bridge',
    feature_codex_desc: '같은 워크스페이스에서 대화, 세션 재개, 반복 작업 자동화.',
    feature_editor_title: '에디터 + 파일 트리',
    feature_editor_desc: '프로젝트 파일 탐색, 구문 강조 편집, 컨테이너에 저장.',
    feature_privacy_title: '로컬 우선 프라이버시',
    feature_privacy_desc: '데이터는 로컬에, 격리가 필요할 때만 Docker 사용.',
    workflow_title: '아이디어-논문 루프',
    workflow_subtitle: '빠른 반복으로 흐름 유지.',
    workflow_step1_title: '계획 + 스캐폴딩',
    workflow_step1_desc: '한 번의 명령으로 LaTeX, 코드, 그림, 산출물을 생성.',
    workflow_step2_title: '실행 + 컴파일',
    workflow_step2_desc: 'Python/R 실행, LaTeX 컴파일, 로그 수집.',
    workflow_step3_title: '검토 + 개선',
    workflow_step3_desc: 'PDF를 확인하고 소스를 수정하며 깔끔하게 반복.',
    demo_title: '제품 데모',
    demo_subtitle: '터미널, 컨트롤, 에디터, PDF 미리보기를 한 화면에.',
    demo_image_alt: 'PaperAgent Terminal 데모',
    ecosystem_title: 'LazyingArt 에코시스템',
    ecosystem_subtitle: 'PaperAgent와 OnlyIdeas를 잇는 제품과 커뮤니티.',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'OnlyIdeas, EchoMind, LazyEdit의 배후 스튜디오입니다.',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: '대담한 아이디어를 위한 연구-제품 커뮤니티.',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: '학습과 창작을 위한 다국어 AI 파트너.',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: '아이디어에 집중, 논문 흐름은 PaperAgent가 처리.',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: '보상과 정산을 위한 LazyingArt Coin.',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: '작은 성과를 수익으로 바꾸는 자동화.',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: '물리·화학 LazyLearn 트랙(준비 중).',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: '아이디어를 초안·작업·게시물로 변환.',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — 수집·번역·하이라이트 생성.',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'OnlyIdeas를 위한 연구 노트와 에세이.',
    footer_line1: 'PaperAgent Terminal · paper.lazying.art',
    footer_line2: '로컬 우선 연구 워크스페이스',
  },
  vi: {
    page_title: 'PaperAgent Terminal',
    page_description: 'PaperAgent Terminal là không gian nghiên cứu ưu tiên cục bộ: chỉnh sửa LaTeX và mã trong trình duyệt, chạy Python/R, xem PDF và log tại một nơi.',
    brand_subtitle: 'Không gian nghiên cứu ưu tiên cục bộ',
    nav_features: 'Tính năng',
    nav_workflow: 'Quy trình',
    nav_demo: 'Demo',
    nav_ecosystem: 'Hệ sinh thái',
    nav_github: 'GitHub',
    lang_label: 'Ngôn ngữ',
    lang_select_label: 'Chọn ngôn ngữ',
    hero_title: 'Overleaf × Codex. Ý tưởng thành bài báo không ma sát.',
    hero_lead:
      'PaperAgent Terminal là không gian làm việc ưu tiên cục bộ: chỉnh sửa LaTeX và mã trong trình duyệt, chạy Python/R ở backend, xem PDF và log tại một nơi.',
    hero_cta_demo: 'Xem demo',
    hero_cta_code: 'Lấy mã nguồn',
    metric_local_title: 'Ưu tiên cục bộ',
    metric_local_desc: 'Dữ liệu ở máy bạn',
    metric_workspace_title: 'Một không gian',
    metric_workspace_desc: 'Code + LaTeX + PDF',
    metric_exec_title: 'Thực thi trực tiếp',
    metric_exec_desc: 'Terminal + Codex Bridge',
    hero_pill: 'PaperAgent Terminal',
    hero_card_title: 'Viết. Thực thi. Xem trước. Lặp lại.',
    hero_card_body: 'Tạo workspace bài báo trong vài giây, biên dịch LaTeX một cú nhấp, chạy thí nghiệm và giữ nhịp.',
    hero_card_footer_left: 'Docker · Tuỳ chọn',
    hero_card_footer_right: 'Codex Bridge · Trực tiếp',
    features_title: 'Tất cả những gì bài báo cần',
    features_subtitle: 'Thiết kế cho quy trình nghiên cứu, mạnh mẽ mà gọn gàng.',
    feature_controls_title: 'Điều khiển dự án',
    feature_controls_desc: 'Tạo workspace, khởi tạo LaTeX, biên dịch một cú nhấp, quản lý Git/SSH.',
    feature_terminal_title: 'Terminal trực tiếp',
    feature_terminal_desc: 'Terminal web gắn với môi trường thực thi, đảm bảo tái lập.',
    feature_pdf_title: 'Xem trước PDF',
    feature_pdf_desc: 'Xem PDF và log cạnh terminal và editor.',
    feature_codex_title: 'Codex Bridge',
    feature_codex_desc: 'Chat cùng Codex, nối lại phiên, tự động hóa việc lặp lại.',
    feature_editor_title: 'Editor + cây thư mục',
    feature_editor_desc: 'Duyệt file dự án, chỉnh sửa với tô màu cú pháp, lưu vào container.',
    feature_privacy_title: 'Quyền riêng tư ưu tiên cục bộ',
    feature_privacy_desc: 'Dữ liệu ở máy bạn, chỉ dùng Docker khi cần cô lập.',
    workflow_title: 'Vòng lặp ý tưởng → bài báo',
    workflow_subtitle: 'Lặp nhanh để giữ đà.',
    workflow_step1_title: 'Lập kế hoạch + khung dự án',
    workflow_step1_desc: 'Một lệnh tạo LaTeX, code, hình và artifacts.',
    workflow_step2_title: 'Thực thi + biên dịch',
    workflow_step2_desc: 'Chạy Python/R, biên dịch LaTeX, thu log không gián đoạn.',
    workflow_step3_title: 'Xem lại + tinh chỉnh',
    workflow_step3_desc: 'Xem PDF, chỉnh nguồn, lặp lại gọn gàng.',
    demo_title: 'Demo sản phẩm',
    demo_subtitle: 'Terminal, điều khiển, editor và PDF trên một màn hình.',
    demo_image_alt: 'Demo PaperAgent Terminal',
    ecosystem_title: 'Hệ sinh thái LazyingArt',
    ecosystem_subtitle: 'Kết nối sản phẩm và cộng đồng cho PaperAgent và OnlyIdeas.',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'Studio đứng sau OnlyIdeas, EchoMind và LazyEdit.',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: 'Cộng đồng từ nghiên cứu đến sản phẩm cho ý tưởng táo bạo.',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: 'Bạn đồng hành AI đa ngôn ngữ cho học tập và sáng tạo.',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: 'Tập trung vào ý tưởng, PaperAgent xử lý luồng bài viết.',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: 'LazyingArt Coin cho thưởng và thanh toán.',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: 'Tự động hóa biến thành quả nhỏ thành thu nhập.',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: 'Lộ trình LazyLearn Vật lý & Hóa học (sắp ra mắt).',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: 'Biến ý tưởng thành bản nháp, nhiệm vụ, bài đăng.',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — ghi lại, dịch, tạo highlight.',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'Sổ tay ghi chú và bài viết cho OnlyIdeas.',
    footer_line1: 'PaperAgent Terminal · paper.lazying.art',
    footer_line2: 'Không gian nghiên cứu ưu tiên cục bộ',
  },
  ar: {
    page_title: 'PaperAgent Terminal',
    page_description: 'PaperAgent Terminal مساحة بحث محلية أولاً تتيح تحرير LaTeX والشفرة، تشغيل Python/R، ومعاينة PDF والسجلات في مكان واحد.',
    brand_subtitle: 'مساحة بحث محلية أولاً',
    nav_features: 'الميزات',
    nav_workflow: 'سير العمل',
    nav_demo: 'العرض',
    nav_ecosystem: 'المنظومة',
    nav_github: 'GitHub',
    lang_label: 'اللغة',
    lang_select_label: 'اختر اللغة',
    hero_title: 'أوفرليف × كودكس. من الفكرة إلى الورقة بلا احتكاك.',
    hero_lead:
      'PaperAgent Terminal مساحة محلية أولاً تتيح تحرير LaTeX والشفرة في المتصفح، تشغيل Python/R في الخلفية، ومعاينة PDF والسجلات في مكان واحد.',
    hero_cta_demo: 'شاهد العرض',
    hero_cta_code: 'احصل على الشفرة',
    metric_local_title: 'محلي أولاً',
    metric_local_desc: 'البيانات على جهازك',
    metric_workspace_title: 'مساحة واحدة',
    metric_workspace_desc: 'شفرة + LaTeX + PDF',
    metric_exec_title: 'تنفيذ مباشر',
    metric_exec_desc: 'طرفية + Codex Bridge',
    hero_pill: 'PaperAgent Terminal',
    hero_card_title: 'اكتب. نفّذ. عاين. كرّر.',
    hero_card_body: 'أنشئ مساحة ورقة في ثوانٍ، ابنِ LaTeX بنقرة، وشغّل التجارب دون فقدان التدفق.',
    hero_card_footer_left: 'Docker · اختياري',
    hero_card_footer_right: 'Codex Bridge · مباشر',
    features_title: 'كل ما تحتاجه الورقة',
    features_subtitle: 'مصمم لسير عمل البحث، قوي بلا ضجيج.',
    feature_controls_title: 'تحكم المشروع',
    feature_controls_desc: 'أنشئ مساحة، ابدأ LaTeX، ابنِ بنقرة، وأدر Git/SSH.',
    feature_terminal_title: 'طرفية مباشرة',
    feature_terminal_desc: 'طرفية ويب مرتبطة ببيئة التنفيذ لإعادة الإنتاج.',
    feature_pdf_title: 'معاينة PDF',
    feature_pdf_desc: 'اعرض PDF والسجلات بجانب الطرفية والمحرر.',
    feature_codex_title: 'Codex Bridge',
    feature_codex_desc: 'تحدث مع Codex في نفس المساحة واستأنف الجلسات وأتمت الأعمال المتكررة.',
    feature_editor_title: 'محرر + شجرة ملفات',
    feature_editor_desc: 'تصفح الملفات وحرر مع إبراز الصياغة واحفظ في الحاوية.',
    feature_privacy_title: 'خصوصية محلية أولاً',
    feature_privacy_desc: 'البيانات تبقى محلياً، واستخدم Docker فقط عند الحاجة للعزل.',
    workflow_title: 'حلقة الفكرة إلى الورقة',
    workflow_subtitle: 'تكرار سريع يحافظ على الزخم.',
    workflow_step1_title: 'خطط + هيكل',
    workflow_step1_desc: 'أمر واحد لإنشاء LaTeX والشفرة والأشكال والمخرجات.',
    workflow_step2_title: 'نفّذ + ابنِ',
    workflow_step2_desc: 'شغّل Python/R وابنِ LaTeX والتقط السجلات بلا انقطاع.',
    workflow_step3_title: 'راجع + حسّن',
    workflow_step3_desc: 'عاين الـ PDF وعدّل المصدر وادفع التغييرات بسهولة.',
    demo_title: 'عرض المنتج',
    demo_subtitle: 'طرفية وتحكم ومحرر ومعاينة PDF في شاشة واحدة.',
    demo_image_alt: 'عرض PaperAgent Terminal',
    ecosystem_title: 'منظومة LazyingArt',
    ecosystem_subtitle: 'أدوات ومجتمعات تدعم PaperAgent وOnlyIdeas.',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'الاستوديو الذي يقف وراء OnlyIdeas و EchoMind و LazyEdit.',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: 'مجتمع من البحث إلى المنتج للأفكار الجريئة.',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: 'رفيق ذكاء اصطناعي متعدد اللغات للتعلّم والإبداع.',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: 'ركّز على الفكرة ودع PaperAgent يدير سير الورقة.',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: 'LazyingArt Coin للمكافآت والتسويات.',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: 'أتمتة تحوّل الإنجازات الصغيرة إلى دخل.',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: 'مسارات LazyLearn للفيزياء والكيمياء (قريبًا).',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: 'حوّل الأفكار إلى مسودات ومهام ومنشورات.',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — التقط، ترجم، وولّد أبرز المقاطع.',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'دفتر ملاحظات وبحوث لـ OnlyIdeas.',
    footer_line1: 'PaperAgent Terminal · paper.lazying.art',
    footer_line2: 'مساحة بحث محلية أولاً',
  },
  fr: {
    page_title: 'PaperAgent Terminal',
    page_description: 'PaperAgent Terminal est un espace local-first pour éditer LaTeX et du code, exécuter Python/R et prévisualiser PDF et logs au même endroit.',
    brand_subtitle: 'Espace de recherche local-first',
    nav_features: 'Fonctionnalités',
    nav_workflow: 'Workflow',
    nav_demo: 'Démo',
    nav_ecosystem: 'Écosystème',
    nav_github: 'GitHub',
    lang_label: 'Langue',
    lang_select_label: 'Choisir la langue',
    hero_title: 'Overleaf × Codex. Des idées au papier sans friction.',
    hero_lead:
      'PaperAgent Terminal est un espace local-first pour éditer LaTeX et du code dans le navigateur, exécuter Python/R côté backend et prévisualiser PDF et logs au même endroit.',
    hero_cta_demo: 'Voir la démo',
    hero_cta_code: 'Obtenir le code',
    metric_local_title: 'Local-first',
    metric_local_desc: 'Données sur votre machine',
    metric_workspace_title: 'Espace unique',
    metric_workspace_desc: 'Code + LaTeX + PDF',
    metric_exec_title: 'Exécution live',
    metric_exec_desc: 'Terminal + Codex Bridge',
    hero_pill: 'PaperAgent Terminal',
    hero_card_title: 'Écrire. Exécuter. Prévisualiser. Itérer.',
    hero_card_body: 'Créez un workspace en quelques secondes, compilez LaTeX en un clic, lancez vos expériences.',
    hero_card_footer_left: 'Docker · Optionnel',
    hero_card_footer_right: 'Codex Bridge · Live',
    features_title: 'Tout ce qu’il faut pour un papier',
    features_subtitle: 'Pensé pour les workflows de recherche, puissant et discret.',
    feature_controls_title: 'Contrôles projet',
    feature_controls_desc: 'Créer l’espace, init LaTeX, compiler en un clic, gérer Git/SSH.',
    feature_terminal_title: 'Terminal live',
    feature_terminal_desc: 'Terminal web relié à l’environnement d’exécution, reproductible.',
    feature_pdf_title: 'Prévisualisation PDF',
    feature_pdf_desc: 'Voir PDF et logs à côté du terminal et de l’éditeur.',
    feature_codex_title: 'Codex Bridge',
    feature_codex_desc: 'Chatter avec Codex, reprendre les sessions, automatiser les tâches répétitives.',
    feature_editor_title: 'Éditeur + arborescence',
    feature_editor_desc: 'Parcourir les fichiers, éditer avec surlignage, sauvegarder dans le conteneur.',
    feature_privacy_title: 'Confidentialité local-first',
    feature_privacy_desc: 'Les données restent locales, Docker seulement si besoin d’isolation.',
    workflow_title: 'Boucle idée → papier',
    workflow_subtitle: 'Itération rapide pour garder l’élan.',
    workflow_step1_title: 'Planifier + scaffold',
    workflow_step1_desc: 'Une commande pour créer LaTeX, code, figures et artefacts.',
    workflow_step2_title: 'Exécuter + compiler',
    workflow_step2_desc: 'Lancer Python/R, compiler LaTeX et capturer les logs.',
    workflow_step3_title: 'Relire + affiner',
    workflow_step3_desc: 'Prévisualiser le PDF, éditer la source, pousser proprement.',
    demo_title: 'Démo produit',
    demo_subtitle: 'Terminal, contrôles, éditeur et PDF en un seul écran.',
    demo_image_alt: 'Démo PaperAgent Terminal',
    ecosystem_title: 'Écosystème LazyingArt',
    ecosystem_subtitle: 'Outils et communautés qui alimentent PaperAgent et OnlyIdeas.',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'Le studio derrière OnlyIdeas, EchoMind et LazyEdit.',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: 'Communauté recherche‑vers‑produit pour des idées audacieuses.',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: 'Compagnon IA multilingue pour apprendre et créer.',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: 'Concentrez-vous sur l’idée, PaperAgent gère le flux de papier.',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: 'LazyingArt Coin pour récompenses et paiements.',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: 'Automatisations pour transformer de petits succès en revenus.',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: 'Parcours LazyLearn pour physique et chimie (bientôt).',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: 'Transforme les idées en brouillons, tâches et posts.',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — capter, traduire et publier des temps forts.',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'Carnet de notes et essais pour OnlyIdeas.',
    footer_line1: 'PaperAgent Terminal · paper.lazying.art',
    footer_line2: 'Espace de recherche local-first',
  },
  es: {
    page_title: 'PaperAgent Terminal',
    page_description: 'PaperAgent Terminal es un espacio local-first para editar LaTeX y código, ejecutar Python/R y previsualizar PDF y logs en un solo lugar.',
    brand_subtitle: 'Espacio de investigación local-first',
    nav_features: 'Funciones',
    nav_workflow: 'Flujo',
    nav_demo: 'Demo',
    nav_ecosystem: 'Ecosistema',
    nav_github: 'GitHub',
    lang_label: 'Idioma',
    lang_select_label: 'Elegir idioma',
    hero_title: 'Overleaf × Codex. Ideas a paper sin fricción.',
    hero_lead:
      'PaperAgent Terminal es un espacio local-first para editar LaTeX y código en el navegador, ejecutar Python/R en backend y previsualizar PDFs y logs en un solo lugar.',
    hero_cta_demo: 'Ver demo',
    hero_cta_code: 'Obtener código',
    metric_local_title: 'Local-first',
    metric_local_desc: 'Datos en tu máquina',
    metric_workspace_title: 'Un solo espacio',
    metric_workspace_desc: 'Código + LaTeX + PDF',
    metric_exec_title: 'Ejecución en vivo',
    metric_exec_desc: 'Terminal + Codex Bridge',
    hero_pill: 'PaperAgent Terminal',
    hero_card_title: 'Escribe. Ejecuta. Previsualiza. Itera.',
    hero_card_body: 'Crea el workspace en segundos, compila LaTeX con un clic y ejecuta experimentos.',
    hero_card_footer_left: 'Docker · Opcional',
    hero_card_footer_right: 'Codex Bridge · En vivo',
    features_title: 'Todo lo que necesita un paper',
    features_subtitle: 'Pensado para flujos de investigación, potente y discreto.',
    feature_controls_title: 'Controles de proyecto',
    feature_controls_desc: 'Crear workspace, iniciar LaTeX, compilar con un clic, gestionar Git/SSH.',
    feature_terminal_title: 'Terminal en vivo',
    feature_terminal_desc: 'Terminal web conectado al entorno de ejecución, reproducible.',
    feature_pdf_title: 'Vista previa PDF',
    feature_pdf_desc: 'Ver PDF y logs junto al terminal y el editor.',
    feature_codex_title: 'Codex Bridge',
    feature_codex_desc: 'Chatea con Codex, reanuda sesiones y automatiza tareas.',
    feature_editor_title: 'Editor + árbol de archivos',
    feature_editor_desc: 'Navega archivos, edita con resaltado y guarda en el contenedor.',
    feature_privacy_title: 'Privacidad local-first',
    feature_privacy_desc: 'Datos locales; usa Docker solo cuando necesitas aislamiento.',
    workflow_title: 'Ciclo idea → paper',
    workflow_subtitle: 'Iteración rápida para mantener el impulso.',
    workflow_step1_title: 'Planificar + scaffold',
    workflow_step1_desc: 'Un comando crea LaTeX, código, figuras y artefactos.',
    workflow_step2_title: 'Ejecutar + compilar',
    workflow_step2_desc: 'Ejecuta Python/R, compila LaTeX y captura logs sin fricción.',
    workflow_step3_title: 'Revisar + mejorar',
    workflow_step3_desc: 'Previsualiza el PDF, edita la fuente y sube cambios limpios.',
    demo_title: 'Demo del producto',
    demo_subtitle: 'Terminal, controles, editor y PDF en una sola pantalla.',
    demo_image_alt: 'Demo de PaperAgent Terminal',
    ecosystem_title: 'Ecosistema LazyingArt',
    ecosystem_subtitle: 'Herramientas y comunidades que impulsan PaperAgent y OnlyIdeas.',
    ecos_card_lazyingart_title: 'LazyingArt',
    ecos_card_lazyingart_desc: 'El estudio detrás de OnlyIdeas, EchoMind y LazyEdit.',
    ecos_card_onlyideas_title: 'OnlyIdeas',
    ecos_card_onlyideas_desc: 'Comunidad de investigación a producto para ideas audaces.',
    ecos_card_echomind_title: 'EchoMind',
    ecos_card_echomind_desc: 'Compañero de IA multilingüe para aprender y crear.',
    ecos_card_paperagent_title: 'PaperAgent/OnlyIdeas',
    ecos_card_paperagent_desc: 'Enfócate en la idea; PaperAgent gestiona el flujo del paper.',
    ecos_card_coin_title: 'Coin',
    ecos_card_coin_desc: 'LazyingArt Coin para recompensas y pagos.',
    ecos_card_earn_title: 'Earn',
    ecos_card_earn_desc: 'Automatizaciones para convertir pequeños logros en ingresos.',
    ecos_card_learn_title: 'Learn',
    ecos_card_learn_desc: 'Rutas LazyLearn de física y química (próximamente).',
    ecos_card_robot_title: 'Robot',
    ecos_card_robot_desc: 'Convierte ideas en borradores, tareas y publicaciones.',
    ecos_card_ideas_title: 'Ideas',
    ecos_card_ideas_desc: 'IdeasGlass — captura, traduce y publica destacados.',
    ecos_card_ideasnotes_title: 'IDEAS',
    ecos_card_ideasnotes_desc: 'Cuaderno de notas y ensayos para OnlyIdeas.',
    footer_line1: 'PaperAgent Terminal · paper.lazying.art',
    footer_line2: 'Espacio de investigación local-first',
  },
};

const normalizeLang = (value) => {
  if (!value) return 'en';
  const lang = value.toLowerCase();
  if (lang.startsWith('zh')) {
    if (lang.includes('hant') || lang.includes('tw') || lang.includes('hk')) {
      return 'zh-Hant';
    }
    return 'zh-Hans';
  }
  if (lang.startsWith('ja')) return 'ja';
  if (lang.startsWith('ko')) return 'ko';
  if (lang.startsWith('vi')) return 'vi';
  if (lang.startsWith('ar')) return 'ar';
  if (lang.startsWith('fr')) return 'fr';
  if (lang.startsWith('es')) return 'es';
  return 'en';
};

const TIMEZONE_LANG_MAP = {
  'Asia/Shanghai': 'zh-Hans',
  'Asia/Chongqing': 'zh-Hans',
  'Asia/Harbin': 'zh-Hans',
  'Asia/Urumqi': 'zh-Hans',
  'Asia/Hong_Kong': 'zh-Hant',
  'Asia/Macau': 'zh-Hant',
  'Asia/Taipei': 'zh-Hant',
  'Asia/Tokyo': 'ja',
  'Asia/Seoul': 'ko',
  'Asia/Ho_Chi_Minh': 'vi',
  'Asia/Saigon': 'vi',
  'Asia/Riyadh': 'ar',
  'Asia/Baghdad': 'ar',
  'Asia/Amman': 'ar',
  'Asia/Beirut': 'ar',
  'Asia/Dubai': 'ar',
  'Asia/Kuwait': 'ar',
  'Asia/Qatar': 'ar',
  'Africa/Cairo': 'ar',
  'Africa/Casablanca': 'ar',
  'Africa/Algiers': 'ar',
  'Africa/Tunis': 'ar',
  'Europe/Paris': 'fr',
  'Europe/Brussels': 'fr',
  'Europe/Zurich': 'fr',
  'Europe/Monaco': 'fr',
  'America/Montreal': 'fr',
  'Europe/Madrid': 'es',
  'America/Mexico_City': 'es',
  'America/Bogota': 'es',
  'America/Lima': 'es',
  'America/Santiago': 'es',
  'America/Argentina/Buenos_Aires': 'es',
  'America/Caracas': 'es',
  'America/Guatemala': 'es',
  'America/Guayaquil': 'es',
  'America/Panama': 'es',
};

const guessLangFromTimeZone = () => {
  try {
    const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
    if (!tz) return null;
    return TIMEZONE_LANG_MAP[tz] || null;
  } catch (err) {
    return null;
  }
};

const resolveLang = () => {
  const params = new URLSearchParams(window.location.search);
  const override = params.get('lang');
  if (override) {
    const normalizedOverride = normalizeLang(override);
    if (translations[normalizedOverride]) {
      try {
        localStorage.setItem('lang', normalizedOverride);
      } catch (err) {
        // Ignore storage failures (private mode).
      }
      return normalizedOverride;
    }
  }
  try {
    const stored = localStorage.getItem('lang');
    if (stored && translations[stored]) {
      return stored;
    }
  } catch (err) {
    // Ignore storage failures (private mode).
  }
  const tzLang = guessLangFromTimeZone();
  if (tzLang && translations[tzLang]) {
    return tzLang;
  }
  const browserLang = normalizeLang((navigator.languages && navigator.languages[0]) || navigator.language);
  if (browserLang !== 'en' && translations[browserLang]) {
    return browserLang;
  }
  return translations[browserLang] ? browserLang : 'en';
};

const applyTranslations = () => {
  const lang = resolveLang();
  document.documentElement.lang = lang;
  document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
  const dict = translations[lang] || translations.en;

  if (dict.page_title) {
    document.title = dict.page_title;
  }
  const metaDescription = document.querySelector('meta[name="description"]');
  if (metaDescription && dict.page_description) {
    metaDescription.setAttribute('content', dict.page_description);
  }

  document.querySelectorAll('[data-i18n]').forEach((el) => {
    const key = el.getAttribute('data-i18n');
    const value = dict[key];
    if (!value) return;
    const attr = el.getAttribute('data-i18n-attr');
    if (attr) {
      el.setAttribute(attr, value);
    } else {
      el.textContent = value;
    }
  });

  const langSelect = document.getElementById('langSelect');
  if (langSelect) {
    langSelect.value = lang;
  }
};

applyTranslations();

const langSelect = document.getElementById('langSelect');
if (langSelect) {
  langSelect.addEventListener('change', (event) => {
    const selected = event.target.value;
    if (translations[selected]) {
      try {
        localStorage.setItem('lang', selected);
      } catch (err) {
        // Ignore storage failures (private mode).
      }
      applyTranslations();
    }
  });
}

const revealItems = document.querySelectorAll('.reveal');

const revealObserver = new IntersectionObserver(
  (entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        revealObserver.unobserve(entry.target);
      }
    });
  },
  { threshold: 0.2 }
);

revealItems.forEach((item) => revealObserver.observe(item));
